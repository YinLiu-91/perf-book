---
typora-root-url: ..\..\img
---

## Chapter Summary

* 由于测量不稳定，调试性能问题通常比调试功能错误更难。
* 除非您设定特定目标，否则您永远无法停止优化。要知道您是否达到了预期目标，您需要提出有意义的定义和指标来衡量目标。根据您关心的内容，它可能是吞吐量、延迟、每秒操作数（屋顶性能）等。
* 现代系统具有不确定的性能。消除系统中的不确定性有助于定义明确的、稳定的性能测试，例如微基准测试。测量生产部署中的性能需要通过使用统计方法分析结果来处理嘈杂的环境。
* 越来越多的大型分布式软件供应商选择直接在生产系统上分析和监控性能，这需要仅使用轻量级分析技术。
* 使用自动性能跟踪系统来防止性能回归泄漏到生产软件中是非常有益的。这样的 CI 系统应该运行自动化性能测试、可视化结果并标记潜在缺陷。
* 可视化性能分布可能有助于发现性能异常。这也是一种向广大观众展示性能结果的安全方式。
* 使用假设检验方法（例如学生 T 检验）确定性能分布之间的统计关系。一旦确定差异在统计上显着，则可以将加速比计算为均值或几何均值之间的比率。
* 丢弃冷运行以确保一切正常运行是可以的，但不要故意丢弃不需要的数据。如果您选择丢弃一些样本，请对所有分布进行统一处理。
* 为了对执行时间进行基准测试，工程师可以使用所有现代平台都提供的两个不同的计时器。全系统高分辨率定时器适用于测量持续时间超过一微秒的事件。要以高精度测量短事件，请使用时间戳计数器。
* 微基准测试有助于快速证明某些东西，但您应该始终在实际条件下的实际应用中验证您的想法。确保通过检查性能配置文件对有意义的代码进行基准测试。

\sectionbreak



